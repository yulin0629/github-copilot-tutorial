# 場景 4：靈活運用三種模式的偵錯助手

##  學習目標
- 學習使用 **@workspace** 進行全專案的錯誤分析 (Ask 模式)
- 掌握 **Edit 模式**進行單檔快速修復
- 體驗 **Agent 模式**處理複雜的跨功能問題
- 理解何時選擇 Ask 諮詢、Edit 快速修復、Agent 自主執行

##  場景說明
您接手了一個購物車計算器的 Web 應用，但這個應用有多個 Bug 需要修復。您將學習如何靈活運用三種模式：
- **Ask 模式**：診斷分析、理解問題
- **Edit 模式**：單檔案的快速修復
- **Agent 模式**：處理複雜的相關問題

##  專案結構
```
04-debugging-assistant/
├── README.md (本檔案)
├── index.html (購物車介面)
├── style.css (樣式檔案) 
├── script.js (含有 10 個 Bug 的 JavaScript)
└── package.json (專案配置)
```

##  已知問題清單
此應用包含以下 10 個刻意設計的 Bug：
1. 總金額計算錯誤（數學運算錯誤）
2. 商品重複添加時數量更新邏輯不完整
3. 運費計算邏輯有問題
4. 清空購物車按鈕沒反應（函數名稱錯誤）
5. 優惠券折扣計算異常
6. 免運費功能沒有實現
7. 套用優惠券後沒有重新計算
8. 結帳後沒有清空購物車
9. 數量修改時價格不會重新計算
10. 移除商品時沒有確認或動畫效果

##  Demo 劇本

###  **重點：快速修復與自主解決**
這個場景展示 Edit 的快速修復能力和 Agent 的自主問題解決。

### 階段 1：快速診斷 (2分鐘)

#### 步驟 1：快速掃描問題 (Ask)
 **Context 準備**：無需加入特定檔案到 context，Ask 模式會使用 @workspace 掃描整個專案

```
@workspace 這個購物車應用有哪些嚴重的 Bug？給我前 3 個最影響使用者體驗的問題。
```
 **使用模式：Ask**


### 階段 2：基礎修復 (5分鐘)

#### 步驟 2：Edit 快速修復明顯錯誤 (Edit)
 **Context 準備**：開啟 `script.js` 並點擊檔案標籤上的 **+** 加入 context

```
修復這些明顯的錯誤：
1. 將 clearShoppingCart 改為 clearCart
2. 將第 72 行的 + 改為 *（總金額計算）
3. 刪除第 83 行（運費永遠是 150 的問題）
```
 **使用模式：Edit**


#### 步驟 3：Edit 修復 UI 互動問題 (Edit)
 **Context 準備**：確保 `script.js` 在 context 中

```
修復以下 UI 互動問題：
1. 移除第 145 行多餘的 event.preventDefault()
2. 修正第 158 行的數量輸入框事件監聽器
3. 修復第 167 行的移除按鈕事件綁定
```
 **使用模式：Edit**


### 階段 3：核心修復 (8分鐘)

#### 步驟 4：Agent 修復計算邏輯 (Agent)
 **Context 準備**：保持 `script.js` 在 context 中（Agent 會自動分析需要的檔案）

```
請修復購物車的所有計算相關問題，包括總金額、運費、優惠券折扣的完整邏輯，並實現免運費功能。
```
 **使用模式：Agent**
 **開啟新對話**


#### 步驟 5：Ask 深入分析系統問題 (Ask)
 **Context 準備**：無需額外準備，使用 @workspace 進行深入分析

```
@workspace 分析這個購物車系統還有哪些缺失的核心功能和邏輯問題？
```
 **使用模式：Ask**


#### 步驟 6：Agent 實現缺失功能 (Agent)
 **Context 準備**：
- 保持 `script.js` 在 context 中
- 加入 `index.html` 了解 HTML 結構（點擊檔案標籤上的 **+**）

```
請實現這些缺失的功能：
1. 結帳後自動清空購物車
2. 數量輸入框變更時自動更新購物車
3. 移除商品時加入確認提示
```
 **使用模式：Agent**


### 階段 4：進階優化 (5分鈘)

#### 步驟 7：Agent 完善使用者體驗 (Agent)
 **Context 準備**：將 `script.js` 和 `index.html` 都加入 context

```
請改善購物車的使用者體驗，包括：
1. 為所有操作加入適當的成功/錯誤提示訊息
2. 加入載入狀態顯示
3. 改善表單驗證和錯誤處理
4. 為購物車商品加入簡單的動畫效果
```
 **使用模式：Agent**
 **開啟新對話**


#### 步驟 8：Edit 細節調整 (Edit)
 **Context 準備**：保持 `script.js` 在 context 中

```
請進行最後的細節調整：
1. 在購物車為空時顯示提示文字
2. 調整優惠券輸入框的 placeholder 文字
3. 修正結帳按鈕的文字為「立即結帳」
```
 **使用模式：Edit**


### 階段 5：延伸應用 (2分鐘)

#### 步驟 9：產生測試案例文件 (Agent)
 **Context 準備**：將 `script.js` 和 `index.html` 都加入 context（點擊檔案標籤上的 **+**）

```
請為這個購物車應用產生完整的測試案例文件，包括正常流程和異常情況的測試項目。
```
 **使用模式：Agent**


#### 步驟 10：Agent 產生修復報告 (Agent)
 **Context 準備**：保持所有相關檔案在 context 中

```
請產生一份詳細的修復報告，包括：
1. 修復的問題清單和解決方案
2. 系統改進建議
3. 未來維護注意事項
```
 **使用模式：Agent**


##  重點技巧

###  快速選擇模式：
1. **簡單替換 → Edit**：拼字錯誤、函數改名、簡單修正
2. **複雜邏輯 → Agent**：計算邏輯、功能實現、跨函數修改
3. **需要理解 → Ask**：分析問題、學習概念、全專案掃描

###  高效提示詞：
```
Edit: "修復第 X 行的錯誤"
Agent: "實現完整的 XX 功能"
Ask: "@workspace 分析 XX 問題"
```


##  Demo 重點



##  預期成果
完成本場景後，您應該：
-  掌握 Ask、Edit、Agent 三種模式的使用時機
-  學會根據問題類型選擇最適合的模式
-  理解 Edit 模式在快速修復中的價值
-  體驗模式組合帶來的效率提升
-  擁有一個完全正常運作的購物車應用

##  下一步
場景 5 將展示 **Agent 策略制定**，讓 Agent 自主設計和實現完整的測試策略。