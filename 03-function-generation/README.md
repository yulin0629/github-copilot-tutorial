# 場景 3：函數生成

## 🎯 學習目標
- 掌握 **Inline Chat** (Ctrl+I) 的使用技巧
- **🚀 初次體驗 Agent 模式**：對比手動 vs Agent 生成的效率差異
- 學習用自然語言描述複雜需求
- **體驗 Agent 協助編程的價值**
- 了解何時應該選擇 Agent 模式

## 📝 場景說明
您需要建立一個 CSV 數據處理工具，包含多個數據處理函數。這個場景將展示**傳統方法 vs Agent 方法**的差異，讓您開始體驗 Agent 模式的優勢。

## 🔄 **Agent 使用比例：20%**
- **傳統方式 (80%)**：使用 inline chat 逐個生成函數
- **Agent 方式 (20%)**：讓 Agent 主動設計整個函數庫

## 🛠️ 初始專案結構
```
03-function-generation/
├── README.md (本檔案)
├── index.html
├── style.css
├── data-processor.js (主要工作檔案)
├── sample-data.csv (測試數據)
└── demo-script.js (展示完成後的範例)
```

## 📚 Demo 劇本

### 🔄 **第一部分：傳統 Inline Chat 方式** (8分鐘)

#### 步驟 1：使用 Inline Chat 逐個生成函數 (Edit)
1. 開啟 `data-processor.js`
2. 按下 `Ctrl+I` 開啟 inline chat
3. 輸入：
```
生成一個 parseCSV 函數，接收 CSV 字串，返回物件陣列
```

#### 步驟 2：繼續生成其他函數 (Edit)
分別使用 inline chat 生成：
```
生成一個 validateEmail 函數，驗證電子郵件格式
```
```
生成 calculateStatistics 函數，計算數字陣列的統計值
```

#### 步驟 3：觀察傳統方式的特點
- ✅ **優點**：精確控制每個函數
- ❌ **缺點**：需要逐個思考和生成，耗時較長
- ❌ **缺點**：可能遺漏重要的輔助函數
- ❌ **缺點**：函數之間缺乏整體協調

### 🚀 **第二部分：初探 Agent 模式** (2分鐘)

#### 步驟 4：體驗 Agent 模式的差異 (Agent)
在 Chat 中輸入：
```
請以 Agent 模式為我設計一個完整的 CSV 數據處理函數庫。分析我的需求後，主動設計所有必要的函數，包括我可能沒想到的輔助函數。請確保函數之間能良好配合，並包含錯誤處理。
```

#### 步驟 5：觀察 Agent 模式的優勢
- ✅ **主動思考**：Agent 會主動考慮你沒想到的需求
- ✅ **整體設計**：確保函數庫的完整性和一致性
- ✅ **最佳實踐**：自動包含錯誤處理、型別檢查等
- ✅ **效率提升**：一次完成整個函數庫設計

### 💡 **關鍵對比分析**
| 傳統方式 | Agent 模式 |
|---------|-----------|
| 逐個生成函數 | 整體設計函數庫 |
| 被動回應需求 | 主動分析需求 |
| 可能遺漏功能 | 完整功能覆蓋 |
| 需要多次互動 | 一次完成設計 |
| 手動協調函數 | 自動確保一致性 |

## 💡 重點提示

### Inline Chat (Ctrl+I) 使用技巧：
1. **即時生成**：直接在需要的位置生成程式碼
2. **上下文感知**：會考慮周圍的程式碼
3. **快速迭代**：不滿意可以立即重新生成
4. **保持焦點**：不需要切換到聊天視窗

### 自然語言生成技巧：
1. **詳細描述**：清楚說明函數的輸入、輸出和邏輯
2. **指定語言**：明確說明使用的程式語言
3. **包含範例**：可以提供輸入輸出範例
4. **錯誤處理**：記得要求包含錯誤處理

### 函數命名最佳實踐：
- 使用動詞開頭（get、set、calculate、validate）
- 清楚表達函數功能
- 遵循專案的命名慣例
- 加上有意義的參數名稱

## 🎬 Demo 重點
1. 展示 Ctrl+I 的便利性和速度
2. 比較 inline chat 和 Chat 視窗的使用場景
3. 示範如何透過良好命名獲得更好的建議
4. 強調迭代改進的重要性

## 📝 常用提示詞範例

### 數據驗證類：
```
生成一個驗證台灣手機號碼格式的函數
生成一個檢查信用卡號是否有效的函數（Luhn算法）
生成一個驗證統一編號的函數
```

### 數據轉換類：
```
生成一個將 snake_case 轉換為 camelCase 的函數
生成一個將數字轉換為中文大寫金額的函數
生成一個將 RGB 顏色轉換為 HEX 格式的函數
```

### 數據處理類：
```
生成一個去除陣列中重複元素的函數
生成一個深度合併兩個物件的函數
生成一個將扁平數據轉換為樹狀結構的函數
```

## ✅ 預期成果
完成本場景後，您應該：
- 熟練使用 Ctrl+I 快速生成函數
- 掌握自然語言生成函數的技巧
- 了解如何透過函數簽名觸發自動完成
- 建立一個功能完整的數據處理工具集

## 🔍 延伸練習
1. 嘗試生成一個複雜的排序函數（支援多欄位排序）
2. 使用 inline chat 重構現有函數
3. 生成對應的單元測試函數
4. 組合多個函數完成一個完整的數據處理流程

## 🎯 挑戰任務
使用學到的技巧，完成以下函數：
1. `mergeCSVFiles()` - 合併多個 CSV 檔案
2. `pivotTable()` - 將數據轉換為樞紐分析表
3. `detectAnomalies()` - 檢測數據中的異常值